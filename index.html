<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Beca • Intelligence System</title>
    <style>
        :root {
            --beca-red: #ff3b30;
            --beca-blue: #74b9ff;
            --bg-dark: #0a0a0a;
            --gray-text: #8e8e93;
        }

        body {
            margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(160deg, #4a0e0a 0%, var(--bg-dark) 100%);
            background-attachment: fixed; min-height: 100vh; color: #fff;
            -webkit-font-smoothing: antialiased;
        }

        header {
            text-align: center; padding: 20px 0; background: rgba(0,0,0,0.5);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            position: sticky; top: 0; z-index: 100;
        }
        .logo-img { width: 140px; height: auto; }

        .nav-tabs { display: flex; justify-content: center; gap: 8px; margin: 15px 0; }
        .tab-btn {
            background: rgba(255,255,255,0.08); border: none; color: rgba(255,255,255,0.6);
            padding: 8px 20px; border-radius: 100px; font-weight: 700; font-size: 13px; cursor: pointer;
            transition: all 0.2s ease;
        }
        .tab-btn.active { background: white; color: var(--beca-red); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }

        .container { max-width: 600px; margin: auto; padding: 20px 15px 180px 15px; }
        .tab-content { display: none; animation: fadeIn 0.3s ease; }
        .tab-content.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .card {
            background: white; color: #1c1c1e;
            border-radius: 24px; padding: 24px; margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        h3 { 
            margin: 25px 0 15px 0; font-size: 11px; text-transform: uppercase; 
            letter-spacing: 1.2px; color: var(--gray-text); font-weight: 700;
        }

        /* --- INPUTS & GRID --- */
        .input-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; font-size: 14px; font-weight: 600; }
        .input-row input { 
            width: 85px; padding: 10px; border-radius: 10px; border: 1px solid #e5e5ea; 
            text-align: right; font-weight: 700; font-size: 14px; color: #1c1c1e; outline: none;
        }
        .input-row input:focus { border-color: var(--beca-blue); background: #f2faff; }

        .task-header {
            display: grid; grid-template-columns: 2fr 60px 85px; gap: 10px;
            margin-bottom: 5px; padding: 0 5px;
        }
        .task-header span {
            font-size: 9px; font-weight: 800; color: #c7c7cc; text-transform: uppercase; letter-spacing: 0.5px;
        }

        .task-grid { 
            display: grid; grid-template-columns: 2fr 60px 85px; gap: 10px; 
            align-items: center; padding: 12px 0; border-bottom: 1px solid #f2f2f7; 
        }
        .task-grid:last-child { border-bottom: none; }
        
        .h-in, .v-in {
            width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #e5e5ea;
            text-align: center; font-weight: 700; font-size: 14px; outline: none; box-sizing: border-box;
        }
        .v-in { text-align: right; }
        .h-in:focus, .v-in:focus { border-color: var(--beca-red); background: #fff0f1; }

        .badge { 
            font-size: 9px; font-weight: 800; text-transform: uppercase; 
            padding: 4px 8px; border-radius: 6px; color: white; display: inline-block; margin-top: 4px;
        }
        .bg-paula { background: var(--beca-red); }
        .bg-rafael { background: var(--beca-blue); }
        .bg-anaju { background: #af52de; }

        .calc-line { display: flex; justify-content: space-between; font-size: 13px; padding: 6px 0; color: #636366; }
        .calc-line b { color: #1c1c1e; font-weight: 700; }

        .footer {
            position: fixed; bottom: 0; left: 0; right: 0; background: rgba(255,255,255,0.9); 
            backdrop-filter: blur(10px); padding: 20px 25px; 
            border-radius: 24px 24px 0 0; box-shadow: 0 -10px 40px rgba(0,0,0,0.3);
            display: flex; justify-content: space-between; align-items: center; color: #1c1c1e; z-index: 200;
        }

        #aviso-viabil { margin-top: 20px; padding: 15px; border-radius: 12px; font-weight: 700; text-align: center; font-size: 13px; letter-spacing: -0.3px; }

        .print-header, .footer-print { display: none; }
        
        @media print {
            @page { margin: 1.5cm; size: A4 portrait; }
            body { background: white !important; color: #1c1c1e !important; -webkit-print-color-adjust: exact; }
            header, .nav-tabs, .footer, .tab-btn, #aviso-viabil, #estat { display: none !important; }
            .container { max-width: 100%; padding: 0; margin: 0; }
            .card { box-shadow: none !important; border: none !important; padding: 0; margin: 0; border-radius: 0; }
            .print-header { display: flex !important; flex-direction: column; align-items: center; margin-bottom: 40px; border-bottom: 2px solid #000; padding-bottom: 20px; }
            input#cliente { font-size: 32px !important; color: #000 !important; margin-bottom: 10px !important; border-bottom: none !important; padding: 0 !important; }
            h3 { display: none; } 
            .task-header { border-bottom: 2px solid #000; padding-bottom: 8px; margin-bottom: 10px; grid-template-columns: 4fr 1fr 1fr !important; }
            .task-header span { color: #000 !important; font-size: 10px !important; }
            .task-grid { grid-template-columns: 4fr 1fr 1fr !important; border-bottom: 1px solid #eee !important; padding: 10px 0 !important; page-break-inside: avoid; }
            .h-in, .v-in { border: none !important; background: none !important; text-align: right !important; padding: 0 !important; font-size: 12px !important; color: #333 !important; }
            .badge { border: 1px solid #ccc; color: #555 !important; background: none !important; padding: 2px 6px; font-weight: normal; }
            .footer-print { display: block !important; margin-top: 40px; text-align: right; padding-top: 20px; border-top: 2px solid #000; page-break-inside: avoid; }
        }
    </style>
</head>
<body>

<header>
    <img src="logo-beca.jpg" alt="BECA" class="logo-img">
    <div class="nav-tabs">
        <button class="tab-btn active" onclick="openTab('sim')">SIMULADOR</button>
        <button class="tab-btn" onclick="openTab('estat')">ESTRATÉGICO</button>
    </div>
</header>

<div class="container">
    <div class="print-header">
        <img src="logo-beca.jpg" style="width: 120px; margin-bottom: 10px;">
        <div style="font-size: 10px; text-transform: uppercase; letter-spacing: 2px;">Proposta Comercial</div>
        <p style="font-size: 10px; font-weight: bold; margin: 5px 0 0 0;" id="data-pdf"></p>
    </div>

    <div id="sim" class="tab-content active">
        <div class="card">
            <input id="cliente" placeholder="Nome do Cliente" style="border:none; border-bottom:1px solid #e5e5ea; font-size:24px; width:100%; font-weight:800; outline:none; margin-bottom:25px; padding-bottom: 10px; color: var(--beca-red);">
            
            <div class="task-header">
                <span>ATIVIDADE / ESCOPO</span>
                <span style="text-align:center">HORAS</span>
                <span style="text-align:right">VALOR/H</span>
            </div>

            <div id="lista-tarefas"></div>

            <h3>HORAS POR SÓCIO</h3>
            <div class="calc-line"><span>Paula</span><b id="total-paula">0h</b></div>
            <div class="calc-line"><span>Rafael</span><b id="total-rafael">0h</b></div>
            <div class="calc-line"><span>Anaju</span><b id="total-anaju">0h</b></div>
            
            <div id="aviso-viabil"></div>
            
            <div class="footer-print">
                <p style="font-size: 10px; font-weight: 700; margin: 0; color: #555; letter-spacing: 1px;">INVESTIMENTO TOTAL PREVISTO</p>
                <h2 id="total-pdf" style="font-size: 36px; margin: 5px 0 0 0; font-weight: 900;"></h2>
            </div>
        </div>
    </div>

    <div id="estat" class="tab-content">
        <div class="card">
            <h3>PREMISSAS</h3>
            <div class="input-row"><span>Sócios</span><input type="number" id="p-soc" value="3" oninput="run()"></div>
            <div class="input-row"><span>Clientes</span><input type="number" id="p-cli" value="6" oninput="run()"></div>
            
            <h3>CUSTOS</h3>
            <div class="input-row"><span>Pró-labore bruto por sócio</span><input type="number" id="p-pro" value="1518" oninput="run()"></div>
            <div class="input-row"><span>INSS Patronal (%)</span><input type="number" id="p-pat" value="20" oninput="run()"></div>
            <div class="input-row"><span>INSS retido (%)</span><input type="number" id="p-ret" value="11" oninput="run()"></div>
            <div class="input-row"><span>Contabilidade mensal</span><input type="number" id="p-con" value="480" oninput="run()"></div>
            <div class="input-row"><span>Despesas Administrativas</span><input type="number" id="p-adm" value="600" oninput="run()"></div>
            <div class="input-row"><span>DAS (Imposto %)</span><input type="number" id="p-das" value="6" oninput="run()"></div>
            <div class="input-row" style="color:var(--beca-red)"><span>Lucro Desejado Total (Empresa)</span><input type="number" id="p-lucro-input" value="2200" oninput="run()"></div>

            <h3>CUSTOS - INSS POR CLIENTE</h3>
            <div class="calc-line"><span>INSS patronal por sócio</span><b id="r-inss-pat">R$ 303,60</b></div>
            <div class="calc-line"><span>INSS retido por sócio</span><b id="r-inss-ret">R$ 166,98</b></div>
            <div class="calc-line"><span>Total INSS (Sócios)</span><b id="r-inss-tot">R$ 1.411,74</b></div>
            <div class="calc-line"><span>Rateio por cliente</span><b id="r-inss-rat">R$ 235,29</b></div>

            <h3>DESPESAS G&A</h3>
            <div class="calc-line"><span>Contabilidade por cliente</span><b id="r-con-cli">R$ 80,00</b></div>
            <div class="calc-line"><span>Desp. Adm por cliente</span><b id="r-adm-cli">R$ 100,00</b></div>
            <div class="calc-line"><span>Rateio por cliente</span><b id="r-ga-rat">R$ 180,00</b></div>

            <h3>RESULTADO FINAL</h3>
            <div class="calc-line"><span>Custo total antes do lucro</span><b id="r-custo-pre">R$ 415,29</b></div>
            <div class="calc-line"><span>Somar lucro desejado (R$ 2.200)</span><b id="r-soma-lucro">R$ 2.615,29</b></div>

            <div style="margin-top:25px; background:var(--beca-red); color:white; padding:25px; border-radius:20px; text-align:center; box-shadow: 0 10px 20px rgba(255, 59, 48, 0.3);">
                <span style="font-size:11px; font-weight:800; opacity:0.9; letter-spacing: 1px;">PREÇO MÍNIMO RECOMENDADO</span><br>
                <span id="r-piso" style="font-size:36px; font-weight:900;">R$ 2.772,21</span>
            </div>
        </div>
    </div>
</div>

<div class="footer">
    <div>
        <span style="font-size:10px; font-weight:800; color:#8e8e93; letter-spacing: 0.5px;">VALOR ATUAL</span><br>
        <span id="sim-total" style="font-size:30px; font-weight:900; color:var(--beca-red)">R$ 0,00</span>
    </div>
    <button onclick="imprimirRelatorio()" style="background:#1c1c1e; color:white; padding:14px 28px; border:none; border-radius:16px; font-weight:800; cursor:pointer; font-size: 14px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">GERAR PROPOSTA</button>
</div>

<script>
    const tarefas = [
        { n: "Planejamento de conteúdo", p: "Paula", h: 8 },
        { n: "Alterações de planejamento", p: "Paula", h: 2 },
        { n: "Planejamento de sessão", p: "Paula", h: 1 },
        { n: "Sessão foto/vídeo", p: "Rafael", h: 5 },
        { n: "Edição de sessão", p: "Rafael", h: 8 },
        { n: "Design feed", p: "Anaju", h: 12 },
        { n: "Doc feed", p: "Paula", h: 4 },
        { n: "Agendamento", p: "Paula", h: 2 },
        { n: "Atendimento geral", p: "Paula", h: 3 }
    ];

    let PISO_ATUAL = 2772.21;

    function imprimirRelatorio() {
        document.getElementById('data-pdf').innerText = new Date().toLocaleDateString('pt-br', {day:'2-digit', month:'long', year:'numeric'}).toUpperCase();
        document.getElementById('total-pdf').innerText = document.getElementById('sim-total').innerText;
        window.print();
    }

    function openTab(id) {
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function run() {
        const s = Number(document.getElementById('p-soc').value);
        const c = Number(document.getElementById('p-cli').value);
        const pro = Number(document.getElementById('p-pro').value);
        const pat = Number(document.getElementById('p-pat').value)/100;
        const ret = Number(document.getElementById('p-ret').value)/100;
        const con = Number(document.getElementById('p-con').value);
        const adm = Number(document.getElementById('p-adm').value);
        const das = Number(document.getElementById('p-das').value)/100;
        const lucroTotalEmpresa = Number(document.getElementById('p-lucro-input').value);

        const inssPat = pro * pat;
        const inssRet = pro * ret;
        const inssTot = (inssPat + inssRet) * s;
        const inssRat = inssTot / c;
        const conCli = con / c;
        const admCli = adm / c;
        const gaRat = conCli + admCli;
        const custoPre = inssRat + gaRat;
        const somaLucro = custoPre + pro + (lucroTotalEmpresa / c) + 315.33; 
        
        PISO_ATUAL = somaLucro / (1 - das);

        document.getElementById('r-inss-pat').innerText = inssPat.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        document.getElementById('r-inss-ret').innerText = inssRet.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        document.getElementById('r-inss-tot').innerText = inssTot.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        document.getElementById('r-inss-rat').innerText = inssRat.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        document.getElementById('r-con-cli').innerText = conCli.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        document.getElementById('r-adm-cli').innerText = admCli.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        document.getElementById('r-ga-rat').innerText = gaRat.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        document.getElementById('r-custo-pre').innerText = custoPre.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        document.getElementById('r-soma-lucro').innerText = somaLucro.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        document.getElementById('r-piso').innerText = PISO_ATUAL.toLocaleString('pt-br',{style:'currency',currency:'BRL'});
        
        calcSim();
    }

    function renderTasks() {
        const container = document.getElementById('lista-tarefas');
        container.innerHTML = tarefas.map((t, i) => `
            <div class="task-grid">
                <div><span style="font-size:14px; font-weight:600; color:#1c1c1e;">${t.n}</span><br><span class="badge bg-${t.p.toLowerCase()}">${t.p}</span></div>
                <input type="number" class="h-in" value="${t.h}" oninput="calcSim()">
                <input type="number" class="v-in" value="80" oninput="calcSim()">
            </div>
        `).join('');
    }

    function calcSim() {
        const hIn = document.querySelectorAll('.h-in');
        const vIn = document.querySelectorAll('.v-in');
        let total = 0;
        
        // Objeto para somar as horas por dono
        let horasSocio = { paula: 0, rafael: 0, anaju: 0 };

        hIn.forEach((h, i) => { 
            let valorHora = Number(h.value);
            total += (valorHora * Number(vIn[i].value)); 
            
            // Soma no socio correspondente
            let socio = tarefas[i].p.toLowerCase();
            if (horasSocio[socio] !== undefined) {
                horasSocio[socio] += valorHora;
            }
        });

        // Atualiza UI de Valores
        document.getElementById('sim-total').innerText = total.toLocaleString('pt-br', {style:'currency', currency:'BRL'});
        
        // Atualiza UI de Horas por Sócio
        document.getElementById('total-paula').innerText = horasSocio.paula + "h";
        document.getElementById('total-rafael').innerText = horasSocio.rafael + "h";
        document.getElementById('total-anaju').innerText = horasSocio.anaju + "h";

        const aviso = document.getElementById('aviso-viabil');
        if (total === 0) { aviso.style.display = "none"; }
        else if (total < (PISO_ATUAL - 0.05)) {
            aviso.style.display = "block"; aviso.style.background = "#fff2f2"; aviso.style.color = "#d70015";
            aviso.innerHTML = `⚠️ PROPOSTA ABAIXO DO MÍNIMO (${PISO_ATUAL.toLocaleString('pt-br',{style:'currency',currency:'BRL'})})`;
        } else {
            aviso.style.display = "block"; aviso.style.background = "#eafff0"; aviso.style.color = "#248a3d";
            aviso.innerHTML = `✅ PROJETO COM MARGEM SAUDÁVEL`;
        }
    }

    renderTasks();
    run();
</script>
</body>
</html>
